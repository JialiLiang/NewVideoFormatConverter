# Fast deployment configuration - for quick fixes and core features only
# Use this when you don't need AI features and want 5x faster deployments
services:
  - type: web
    name: video-format-converter-fast
    env: python
    # Super fast build - only core dependencies (~1 minute)
    buildCommand: pip install --no-cache-dir --upgrade pip && pip install --no-cache-dir -r requirements-base.txt
    startCommand: gunicorn --bind 0.0.0.0:$PORT --workers 2 --timeout 300 app:app
    plan: starter
    healthCheckPath: /health
    # Build optimization settings
    buildFilter:
      paths:
      - app.py
      - video_converter_app.py  
      - video_converter.py
      - tools_config.py
      - requirements-base.txt
      - templates/**
      ignoredPaths:
      - adlocalizer_app.py  # Skip AI features for speed
      - requirements-ai.txt
      - setup_models.py
      - README.md
      - "*.md"
      - test_output/**
      - temp_files/**
      - uploads/**
      - .git/**
    envVars:
      - key: PORT
        value: 10000
      - key: FLASK_ENV
        value: production
      - key: PYTHONWARNINGS
        value: ignore
      - key: PYTHONUNBUFFERED
        value: 1
      - key: ENABLE_AI
        value: false  # Disable AI features for speed
      - key: PIP_NO_CACHE_DIR
        value: 1
      - key: PIP_DISABLE_PIP_VERSION_CHECK
        value: 1
    disk: 
      sizeGB: 1  # Smaller disk for faster provisioning
    autoDeploy: true
