{% extends "base.html" %}

{% block title %}ðŸª„ Creative Name Generator - Photoroom UA Video Tools{% endblock %}

{% set use_main_container = true %}
{% set current_tool = "Creative Name Generator" %}

{% block head %}
<style>
        /* Page-specific styles - design tokens handle the base styles */
        .header{ text-align:center; margin-bottom:30px; color:var(--ink-1); }

        /* Animations keep same, just shift glows into palette */
        @keyframes inputShimmer{
            0%,100%{ box-shadow:0 10px 30px rgba(102,126,234,.30), 0 0 20px rgba(118,75,162,.20); }
            50%    { box-shadow:0 15px 40px rgba(102,126,234,.50), 0 0 30px rgba(118,75,162,.40); }
        }
        @keyframes inputShine{
            0%{ transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100%{ transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        @keyframes previewShimmer{
            0%,100%{ box-shadow:0 10px 30px rgba(122,167,255,.30), 0 0 20px rgba(77,136,255,.20); }
            50%    { box-shadow:0 15px 40px rgba(122,167,255,.50), 0 0 30px rgba(77,136,255,.40); }
        }
        @keyframes previewShine{
            0%{ transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100%{ transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        /* Design tokens handle form elements, buttons, and section styling */

        /* Generated name card */
        .generated-name{
            background:linear-gradient(135deg, var(--neutral-1), var(--neutral-2));
            border:2px solid var(--indigo-1);
            border-radius:15px; padding:20px; margin:20px 0; text-align:center; position:relative;
        }
        .generated-name .name-text{
            font-family:'Courier New', monospace; font-size:1.2em; font-weight:bold; color:var(--ink-2); word-break:break-all; margin-bottom:15px;
        }

        /* Copy buttons â€” from green -> indigo */
        .copy-btn{
            background: linear-gradient(135deg, var(--indigo-1), var(--indigo-2));
            color:var(--white); border:none; border-radius:8px; padding:8px 16px; cursor:pointer; transition:all .3s ease;
            box-shadow:0 4px 12px rgba(102,126,234,.25);
        }
        .copy-btn:hover{ transform:translateY(-1px); filter:brightness(1.05); }
        .copy-btn.copied{ background: linear-gradient(135deg, var(--accent-1), var(--accent-2)); }

        /* Rule/format blocks aligned to palette */
        .rule-card{
            background:var(--neutral-1);
            border-left:4px solid var(--indigo-1);
            border-radius:8px; padding:15px; margin:15px 0;
        }
        .format-display{
            background:var(--lavender-1);
            border:1px solid var(--lavender-2);
            border-radius:8px; padding:15px; font-family:'Courier New', monospace; font-size:.9em; margin:15px 0;
        }
        .tag-example{
            background:var(--lavender-1);
            border:1px solid var(--lavender-2);
            border-radius:5px; padding:8px 12px; margin:5px; display:inline-block; font-family:'Courier New', monospace; font-size:.85em;
        }

        /* Preview panel (right) â€” shift from cyan to unified accent indigo/blue) */
        .preview-name-container{
            background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%) !important;
            border:3px solid transparent; border-radius:20px;
            box-shadow:0 10px 30px rgba(122,167,255,.30), 0 0 20px rgba(77,136,255,.20);
            position:relative; overflow:hidden; animation:previewShimmer 3s ease-in-out infinite; margin-bottom:20px;
        }

        /* Design tokens handle navbar styling */

        .form-label{ font-weight:600; color:var(--ink-2); margin-bottom:8px; }
        .input-group{ margin-bottom:20px; }

        .creator-type-badge{
            background:var(--indigo-1); color:var(--surface-1); padding:4px 8px; border-radius:12px; font-size:.75em; margin-left:5px;
        }

        /* Fancy input container keeps purple gradient */
        .creative-name-container{
            background: linear-gradient(135deg, var(--indigo-1) 0%, var(--indigo-2) 100%) !important;
            border:3px solid transparent; border-radius:20px;
            box-shadow:0 10px 30px rgba(102,126,234,.30), 0 0 20px rgba(118,75,162,.20);
            position:relative; overflow:hidden; animation:inputShimmer 3s ease-in-out infinite;
        }
        .creative-name-input:focus{
            border-color: rgba(255,255,255,.8) !important;
            box-shadow: inset 0 2px 10px rgba(0,0,0,.1), 0 0 20px rgba(255,255,255,.5) !important;
            transform:scale(1.02);
        }
        .creative-name-container:hover{
            transform:translateY(-2px);
            box-shadow:0 15px 40px rgba(102,126,234,.4), 0 0 30px rgba(118,75,162,.3);
        }
        .preview-section{
            background: linear-gradient(135deg, var(--neutral-1), var(--neutral-2));
            border-radius:10px; padding:20px; margin-top:20px;
        }
        .preview-label{ font-weight:600; color:var(--ink-2); margin-bottom:10px; }
        .preview-text{
            font-family:'Courier New', monospace;
            background:var(--white);
            border:1px solid #dee2e6;
            border-radius:5px; padding:10px; font-size:.9em; word-break:break-all;
        }

        /* Iteration panel: replace green gradient with palette gradient */
        .section .generated-name + .btn,
        .section .generated-name .btn{ /* safeguard, but we'll style the actual iteration block below */
            background:linear-gradient(135deg, var(--indigo-1), var(--indigo-2));
            color:var(--white);
        }
        /* Specific iteration section card that had green */
        .section .sticky-top .generated-name{
            background: linear-gradient(135deg, var(--indigo-1), var(--indigo-2)) !important;
            color:var(--white);
            border: none;
        }
        #iterationCopyBtn{ background: rgba(255,255,255,.2) !important; color:var(--white); }

        /* Feature tag buttons â€” align Bootstrap outline to our palette */
        .btn-outline-primary{
            color: var(--indigo-1);
            border-color: var(--indigo-1);
        }
        .btn-outline-primary:hover,
        .btn-outline-primary.active{
            color: var(--white);
            background-color: var(--indigo-1);
            border-color: var(--indigo-1);
        }
        .btn-outline-secondary{
            color: #8b8e99;
            border-color: #cfd3da;
        }
    </style>
{% endblock %}

{% block content %}

        <div class="header">
            <h1><i class="fas fa-magic"></i> Creative Name Generator</h1>
            <blockquote style="
                font-style: italic;
                color: #6c757d;
                margin: 20px auto;
                text-align: center;
                max-width: 500px;
            ">
                Make videos, not filenames that look like Wi-Fi passwords.
            </blockquote>
        </div>


        <!-- Form and Preview Side by Side -->
        <div class="row">
            <!-- Left: Form -->
            <div class="col-lg-8">
                <!-- Name Generator Form -->
        <div class="section">
            <h3><i class="fas fa-form"></i> Generate Your Creative Name</h3>
            
            <div class="row">
                <!-- Form in more compact layout -->
                <div class="col-12">
                    <form id="nameGeneratorForm">
                        <div class="row">
                            <!-- Left Column -->
                            <div class="col-md-6">
                                <!-- Creator Type -->
                                <div class="mb-3">
                                    <label for="creatorType" class="form-label">
                                        <i class="fas fa-briefcase"></i> Creator Type
                                    </label>
                                    <select class="form-select" id="creatorType" onchange="updatePreview()">
                                        <option value="">Select creator type...</option>
                                        <option value="internal" selected>Internal</option>
                                        <option value="freelancer">Freelancer</option>
                                        <option value="ramdam">Ramdam</option>
                                        <option value="influencer">Influencer</option>
                                    </select>
                                    <small class="text-muted">Type of content creator</small>
                                </div>

                                <!-- Creator Name (for non-internal) -->
                                <div class="mb-3" id="creatorNameDiv" style="display: none;">
                                    <label for="creatorName" class="form-label">
                                        <i class="fas fa-user"></i> Creator Name
                                    </label>
                                    <input type="text" class="form-control" id="creatorName" placeholder="e.g., artlina 333, jeremy" 
                                           onchange="formatInputToCamelCase('creatorName')" oninput="formatInputToCamelCase('creatorName')">
                                    <small class="text-muted">Auto-formats: "art lina 333" â†’ "ArtLina333"</small>
                                </div>

                        <!-- Creative Name - Premium Bling Style -->
                        <div class="mb-3 p-4 creative-name-container" style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            border: 3px solid transparent;
                            border-radius: 20px;
                            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3), 0 0 20px rgba(118, 75, 162, 0.2);
                            position: relative;
                            overflow: hidden;
                            animation: inputShimmer 3s ease-in-out infinite;
                        ">
                            <!-- Animated background overlay -->
                            <div style="
                                position: absolute;
                                top: -50%;
                                left: -50%;
                                width: 200%;
                                height: 200%;
                                background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
                                animation: inputShine 2.3s ease-in-out infinite;
                                pointer-events: none;
                            "></div>
                            
                            <label for="filename" class="form-label" style="
                                font-weight: 700; 
                                color: white; 
                                font-size: 1.3em;
                                text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                                margin-bottom: 15px;
                                display: flex;
                                align-items: center;
                                gap: 10px;
                            ">
                                <span style="font-size: 1.2em;">âœ¨</span>
                                <span>Type here</span>
                                <span style="font-size: 1.2em;">âœ¨</span>
                            </label>
                            
                            <input type="text" class="form-control form-control-lg creative-name-input" id="filename" 
                                   placeholder="e.g., RedBottle, OutdoorPlant" 
                                   onchange="formatCreativeName()" oninput="formatCreativeName()" 
                                   style="
                                       border: 3px solid rgba(255,255,255,0.3);
                                       background: rgba(255,255,255,0.95);
                                       font-size: 1.2em;
                                       font-weight: 600;
                                       border-radius: 15px;
                                       padding: 15px 20px;
                                       box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);
                                       transition: all 0.3s ease;
                                   ">
                                   
                            <small style="
                                color: rgba(255,255,255,0.9);
                                font-weight: 500;
                                font-size: 0.9em;
                                text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                                display: flex;
                                align-items: center;
                                gap: 5px;
                                margin-top: 10px;
                                margin-bottom: 15px;
                            ">
                                <span>ðŸª„</span>
                                <span>Auto-formats & auto-numbers: "dirty kitchen" â†’ "DirtyKitchen-1"</span>
                                <span>ðŸ’Ž</span>
                            </small>
                            
                            <!-- Creative Name Number Selector -->
                            <div style="
                                display: flex;
                                align-items: center;
                                gap: 10px;
                                background: rgba(255,255,255,0.15);
                                padding: 12px 16px;
                                border-radius: 12px;
                                border: 2px solid rgba(255,255,255,0.2);
                            ">
                                <label for="creativeNumber" style="
                                    color: white;
                                    font-weight: 600;
                                    font-size: 0.9em;
                                    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                                    margin: 0;
                                    display: flex;
                                    align-items: center;
                                    gap: 5px;
                                ">
                                    <span>ðŸ”¢</span>
                                    <span>Variation Number:</span>
                                </label>
                                <input type="number" id="creativeNumber" value="1" min="1" max="999" 
                                       onchange="manualNumberChange()" oninput="manualNumberChange()"
                                       style="
                                           width: 80px;
                                           padding: 8px 12px;
                                           border: 2px solid rgba(255,255,255,0.3);
                                           border-radius: 8px;
                                           background: rgba(255,255,255,0.9);
                                           font-weight: 600;
                                           font-size: 1em;
                                           text-align: center;
                                           color: #333;
                                       ">
                                <small style="
                                    color: rgba(255,255,255,0.8);
                                    font-size: 0.8em;
                                    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
                                ">
                                    âœ¨ Auto-finds next number | Override if needed
                                </small>
                            </div>
                        </div>

                                <!-- Feature Tags -->
                                <div class="mb-3">
                                    <label class="form-label">
                                        <i class="fas fa-star"></i> Feature Tags
                                    </label>
                                    <div class="d-flex flex-wrap gap-2" id="featureTagsContainer">
                                        <button type="button" class="btn btn-outline-primary btn-sm feature-tag-btn active" data-value="AIBG" onclick="selectFeatureTag(this)">
                                            AIBG
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="STORY" onclick="selectFeatureTag(this)">
                                            STORY
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="LOGO" onclick="selectFeatureTag(this)">
                                            LOGO
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="ANIM" onclick="selectFeatureTag(this)">
                                            ANIM
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="MIX" onclick="selectFeatureTag(this)">
                                            MIX
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="AIFILL" onclick="selectFeatureTag(this)">
                                            AIFILL
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="RETOUCH" onclick="selectFeatureTag(this)">
                                            RETOUCH
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="CHANGE" onclick="selectFeatureTag(this)">
                                            CHANGE
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="IMGT-MODEL" onclick="selectFeatureTag(this)">
                                            IMGT-MODEL
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="IMGT-STAGE" onclick="selectFeatureTag(this)">
                                            IMGT-STAGE
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="IMGT-BEAUTIFY" onclick="selectFeatureTag(this)">
                                            IMGT-BEAUTIFY
                                        </button>
                                        <button type="button" class="btn btn-outline-secondary btn-sm feature-tag-btn" data-value="RnD" onclick="selectFeatureTag(this)">
                                            RnD
                                        </button>
                                    </div>
                                    <input type="hidden" id="feature" value="AIBG">
                                    <small class="text-muted">Click to select a feature tag â€¢ <a href="#feature-tags-help" class="text-decoration-none">ðŸ“– Feature tags explained</a></small>
                                </div>
                            </div>

                            <!-- Right Column -->
                            <div class="col-md-6">
                                <!-- Creative Tags Option -->
                                <div class="mb-3">
                                    <label class="form-label">
                                        <i class="fas fa-tags"></i> Creative Tags
                                    </label>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="creativeTags" id="useFullTags" value="full" onchange="toggleCreativeTags()">
                                        <label class="form-check-label" for="useFullTags">
                                            Apply all creative tags (Hook, Voiceover, Music, Dimension)
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" name="creativeTags" id="usePlaceholder" value="placeholder" checked onchange="toggleCreativeTags()">
                                        <label class="form-check-label" for="usePlaceholder">
                                            Skip tags and insert placeholder (_-_)
                                        </label>
                                    </div>
                                </div>

                                <!-- Language -->
                                <div class="mb-3">
                                    <label for="language" class="form-label">
                                        <i class="fas fa-globe"></i> Language
                                    </label>
                                    <select class="form-select" id="language" onchange="updatePreview()">
                                        <option value="">Select language...</option>
                                        <!-- Priority languages -->
                                        <option value="EN" selected>EN - English</option>
                                        <option value="FR">FR - French (France)</option>
                                        <option value="BR">BR - Portuguese (Brazil)</option>
                                        <option value="ES">ES - Spanish (Spain)</option>
                                        <option value="JP">JP - Japanese</option>
                                        <option value="KR">KR - Korean</option>
                                        <!-- Other languages (alphabetical) -->
                                        <option value="SA">SA - Arabic</option>
                                        <option value="HK">HK - Cantonese</option>
                                        <option value="CN">CN - Chinese</option>
                                        <option value="NL">NL - Dutch</option>
                                        <option value="PH">PH - Filipino</option>
                                        <option value="DE">DE - German</option>
                                        <option value="IN">IN - Hindi</option>
                                        <option value="ID">ID - Indonesian</option>
                                        <option value="IT">IT - Italian</option>
                                        <option value="MY">MY - Malay</option>
                                        <option value="PL">PL - Polish</option>
                                        <option value="TH">TH - Thai</option>
                                        <option value="TR">TR - Turkish</option>
                                        <option value="VN">VN - Vietnamese</option>
                                    </select>
                                    <small class="text-muted">Content language</small>
                                </div>
                            </div>
                        </div>

                        <!-- Creative Tags Section -->
                        <div id="creativeTagsSection">

                            <!-- HOOK -->
                            <div class="mb-3">
                                <label for="hook" class="form-label">
                                    <i class="fas fa-fish"></i> HOOK
                                </label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <select class="form-select" id="hook" onchange="updateHookText(); updatePreview()">
                                            <option value="come" selected>come</option>
                                            <option value="UGC">UGC</option>
                                            <option value="text">text</option>
                                            <option value="emoji">emoji</option>
                                            <option value="ASMR">ASMR</option>
                                            <option value="AI">AI</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" id="hookTextInput" placeholder="e.g., Turn your photo into a video" 
                                               onchange="formatInputToCamelCase('hookTextInput')" oninput="formatInputToCamelCase('hookTextInput')" style="display: none;">
                                        <input type="text" class="form-control" id="hookUgcInput" placeholder="e.g., arline778" 
                                               onchange="updatePreview()" oninput="updatePreview()" style="display: none;">
                                    </div>
                                </div>
                                <small class="text-muted">HOOK-[keyword], HOOK-text-[FormattedText], or HOOK-ugc-[username]</small>
                            </div>

                            <!-- VO (Voice Over) -->
                            <div class="mb-3">
                                <label for="voiceOver" class="form-label">
                                    <i class="fas fa-microphone"></i> VO (Voice Over)
                                </label>
                                <div class="row">
                                    <div class="col-md-4">
                                        <select class="form-select" id="voiceOver" onchange="updateVoiceText(); updatePreview()">
                                            <option value="tom" selected>Tom</option>
                                            <option value="doja">Doja</option>
                                            <option value="chris">Chris</option>
                                            <option value="chris">Human</option>
                                            <option value="custom">Custom voice</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control" id="voiceName" placeholder="e.g., sarah, mike" 
                                               onchange="formatInputToCamelCase('voiceName')" oninput="formatInputToCamelCase('voiceName')" style="display: none;">
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" class="form-control" id="voScript" placeholder="e.g., dont take bad pictures" 
                                               onchange="formatInputToCamelCase('voScript')" oninput="formatInputToCamelCase('voScript')">
                                    </div>
                                </div>
                                <small class="text-muted">VO-[speaker] or VO-[speaker]-[FormattedScript]</small>
                            </div>

                            <!-- MUSIC -->
                            <div class="mb-3">
                                <label for="music" class="form-label">
                                    <i class="fas fa-music"></i> MUSIC
                                </label>
                                <div class="row">
                                    <div class="col-md-6">
                                        <select class="form-select" id="music" onchange="updateMusicText(); updatePreview()">
                                            <option value="any" selected>any</option>
                                            <option value="rapbeat">rapbeat</option>
                                            <option value="lastchristmas">lastchristmas</option>
                                            <option value="lofi"></option>
                                            <option value="kpop"></option>
                                            <option value="hiphop"></option>
                                            <option value="nostalgic"></option>
                                            <option value="custom">Custom song name</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <input type="text" class="form-control" id="musicCustom" placeholder="e.g., last christmas" 
                                               onchange="formatInputToCamelCase('musicCustom')" oninput="formatInputToCamelCase('musicCustom')" style="display: none;">
                                    </div>
                                </div>
                                <small class="text-muted">MUSIC-[songtitle] (auto-formats: "last christmas" â†’ "LastChristmas")</small>
                            </div>

                            <!-- DIM (Dimension/Format) -->
                            <div class="mb-3">
                                <label for="dimension" class="form-label">
                                    <i class="fas fa-expand"></i> DIM (Dimension)
                                </label>
                                <select class="form-select" id="dimension" onchange="updatePreview()">
                                    <option value="">Select dimension...</option>
                                    <option value="PT" selected>PT - Portrait (9:16)</option>
                                    <option value="SQ">SQ - Square (1:1)</option>
                                    <option value="LS">LS - Landscape (16:9)</option>
                                </select>
                                <small class="text-muted">Always specify aspect ratio</small>
                            </div>
                        </div>


                    </form>
                </div>
            </div>
        </div>
            </div>
            
            <!-- Right: Live Preview -->
            <div class="col-lg-4">
                <div class="sticky-top" style="top: 20px;">
                    <!-- Premium Preview Container -->
                    <div class="p-4 preview-name-container" style="
                        background: linear-gradient(135deg, #6bd0ff 0%, #249dee 100%);
                        border: 3px solid transparent;
                        border-radius: 20px;
                        box-shadow: 0 10px 30px rgba(107, 208, 255, 0.3), 0 0 20px rgba(36, 157, 238, 0.2);
                        position: relative;
                        overflow: hidden;
                        animation: previewShimmer 3s ease-in-out infinite;
                        margin-bottom: 20px;
                    ">
                        <!-- Animated background overlay -->
                        <div style="
                            position: absolute;
                            top: -50%;
                            left: -50%;
                            width: 200%;
                            height: 200%;
                            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
                            animation: previewShine 2.5s ease-in-out infinite;
                            pointer-events: none;
                        "></div>
                        
                        <h3 style="
                            color: white;
                            font-weight: 700;
                            font-size: 1.3em;
                            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
                            margin-bottom: 20px;
                            display: flex;
                            align-items: center;
                            gap: 10px;
                            justify-content: center;
                        ">
                            <span style="font-size: 1.2em;">ðŸš€</span>
                            <span>New Creative Name</span>
                            <span style="font-size: 1.2em;">ðŸš€</span>
                        </h3>
                        
                        <div class="generated-name" id="liveGeneratedName" style="
                            background: rgba(255, 255, 255, 0.95);
                            border: 3px solid rgba(255,255,255,0.3);
                            border-radius: 15px;
                            padding: 20px;
                            margin-bottom: 15px;
                        ">
                            <div class="name-text" id="liveNameText" style="
                                color: #333;
                                font-weight: 600;
                                font-size: 1.1em;
                                word-break: break-all;
                                margin-bottom: 15px;
                            ">internal-[filename]_-_AIBG_EN</div>
                            <button class="copy-btn" id="liveCopyBtn" onclick="copyLiveName()" style="
                                background: linear-gradient(135deg, #6bd0ff, #249dee);
                                color: white;
                                border: none;
                                padding: 10px 20px;
                                border-radius: 10px;
                                font-weight: 600;
                                box-shadow: 0 4px 15px rgba(107, 208, 255, 0.3);
                                transition: all 0.3s ease;
                            ">
                                <i class="fas fa-copy"></i> Copy to Clipboard
                            </button>
                        </div>
                        
                        <!-- Mock preview with ID/creator/date -->
                        <div style="
                            background: rgba(255,255,255,0.15);
                            border-radius: 12px;
                            padding: 15px;
                        ">
                            <div style="
                                color: rgba(255,255,255,0.9);
                                font-weight: 500;
                                font-size: 0.9em;
                                margin-bottom: 8px;
                                display: flex;
                                align-items: center;
                                gap: 5px;
                            ">
                                <i class="fas fa-info-circle"></i>
                                <span>Preview after upload</span>
                            </div>
                            <div style="
                                color: white;
                                font-size: 0.85em;
                                word-break: break-all;
                                font-family: monospace;
                                background: rgba(0,0,0,0.2);
                                padding: 10px;
                                border-radius: 8px;
                            " id="mockPreview">
                                12345_John_internal-[filename]_-_AIBG_EN_19092025
                            </div>
                        </div>
                        
                        <!-- Quick Actions -->
                        <div class="mt-3 text-center">
                            <button class="btn btn-sm" onclick="clearForm()" style="
                                background: rgba(255,255,255,0.2);
                                color: white;
                                border: 2px solid rgba(255,255,255,0.3);
                                border-radius: 10px;
                                font-weight: 600;
                                padding: 8px 16px;
                                transition: all 0.3s ease;
                            ">
                                <i class="fas fa-refresh"></i> Reset Form
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Iteration Naming Section -->
        <div class="section">
            <h3><i class="fas fa-repeat"></i> ðŸ”„ Creative Iteration Generator</h3>
            <p class="text-muted mb-4">
                Generate iteration names for winning creatives. Paste an existing AdManage filename and get the next iteration automatically.
            </p>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="mb-3">
                        <label for="originalFilename" class="form-label">
                            <i class="fas fa-file"></i> Original AdManage Filename
                        </label>
                        <input type="text" class="form-control form-control-lg" id="originalFilename" 
                               placeholder="e.g., 10090_Jiali_internal-RedBottle_ANIM_EN"
                               onchange="generateIteration()" oninput="generateIteration()">
                        <small class="text-muted">Paste the complete filename from AdManage</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="iterationNumber" class="form-label">
                            <i class="fas fa-hashtag"></i> Iteration Number
                        </label>
                        <input type="number" class="form-control" id="iterationNumber" 
                               value="1" min="1" max="99"
                               onchange="generateIteration()" oninput="generateIteration()">
                        <small class="text-muted">Which iteration version (1, 2, 3...)</small>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="sticky-top" style="top: 20px;">
                        <h5><i class="fas fa-magic"></i> Generated Iteration</h5>
                        <div class="generated-name" style="background: linear-gradient(135deg, #28a745, #20c997); color: white;">
                            <div class="name-text" id="iterationResult" style="color: white;">
                                12345_Jiali_internal-RedBottle-ITE-1_ANIM_EN
                            </div>
                            <button class="copy-btn" id="iterationCopyBtn" onclick="copyIterationName()" style="background: rgba(255,255,255,0.2);">
                                <i class="fas fa-copy"></i> Copy Iteration
                            </button>
                        </div>
                        
                        <div class="mt-3">
                            <div class="preview-label">
                                <i class="fas fa-info-circle"></i> How it works
                            </div>
                            <div class="preview-text" style="font-size: 0.85em;">
                                Adds -ITE-X after the product name:<br>
                                <code>internal-RedBottle</code> â†’ <code>internal-RedBottle-ITE-1</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Creative Naming Structure Section -->
        <div class="section">
            <h3><i class="fas fa-bolt"></i> ðŸ“Œ Creative Naming Structure</h3>
            <div class="alert alert-info">
                <div class="format-display">
                    <strong>Format:</strong> [id]_[creator]_[creator-type-filename]_[HOOK-â€¦_VO-â€¦_MUSIC-â€¦_DIM]_[feature]_[language]_[date]
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <strong>Critical Rules:</strong>
                        <ul class="mb-0">
                            <li><code>_</code> = separate <strong>main fields</strong></li>
                            <li><code>-</code> = separate <strong>details inside tags</strong></li>
                            <li><strong>ID, Creator, Date</strong> auto-added by Admanage</li>
                            <li><strong>All 4 tags</strong>: HOOK â†’ VO â†’ MUSIC â†’ DIM (or use <code>_-_</code>)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <strong>Examples:</strong><br>
                        <div class="tag-example">
                            internal-RedBottle_HOOK-come-text_VO-tom_MUSIC-rapbeat_PT_AIBG_EN
                        </div>
                        <div class="tag-example">
                            internal-RedBottle_-_AIBG_EN
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Feature Tags Help Section -->
        <div class="section" id="feature-tags-help">
            <h3><i class="fas fa-info-circle"></i> ðŸ“– Feature Tags Explained</h3>
            <div class="alert alert-light border">
                <p class="mb-3">Each feature tag represents a specific Photoroom tool or capability:</p>
                
                <div class="row">
                    <div class="col-md-6">
                        <h6><i class="fas fa-star text-primary"></i> Core Features</h6>
                        <div class="tag-example">AIBG</div>
                        <small class="text-muted d-block mb-2">AI background ads</small>
                        
                        <div class="tag-example">STORY</div>
                        <small class="text-muted d-block mb-2">AI Instagram Story ads</small>
                        
                        <div class="tag-example">LOGO</div>
                        <small class="text-muted d-block mb-2">AI logo ads</small>
                        
                        <div class="tag-example">ANIM</div>
                        <small class="text-muted d-block mb-2">Animated Design</small>
                        
                        <div class="tag-example">MIX</div>
                        <small class="text-muted d-block mb-2">Multiple features combined</small>
                    </div>
                    
                    <div class="col-md-6">
                        <h6><i class="fas fa-magic text-success"></i> Other Tools</h6>
                        <div class="tag-example">AIFILL</div>
                        <small class="text-muted d-block mb-2">AI Fill tool</small>
                        
                        <div class="tag-example">RETOUCH</div>
                        <small class="text-muted d-block mb-2">Photo retouching</small>
                        
                        <div class="tag-example">CHANGE</div>
                        <small class="text-muted d-block mb-2">Describe a Change feature</small>
                        
                        <div class="tag-example">RnD</div>
                        <small class="text-muted d-block mb-2">ðŸ§ª Experimental new feature, not yet in existing tags</small>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h6><i class="fas fa-layer-group text-info"></i> Image Transformation (IMGT) Suite</h6>
                    <div class="d-flex flex-wrap gap-2 align-items-center">
                        <div class="tag-example">IMGT-MODEL</div>
                        <small class="text-muted">Virtual model â€¢</small>
                        
                        <div class="tag-example">IMGT-STAGE</div>
                        <small class="text-muted">Product staging â€¢</small>
                        
                        <div class="tag-example">IMGT-BEAUTIFY</div>
                        <small class="text-muted">Product beautifier</small>
                    </div>
                    <small class="text-muted d-block mt-2">
                        <i class="fas fa-lightbulb"></i> <strong>IMGT</strong> is the umbrella category for image transformation tools
                    </small>
                </div>
            </div>
        </div>

        <!-- Help Section -->
{% endblock %}

{% block scripts %}
    <script>
        // Global counter for creative names - magical auto-increment
        let creativeNameCounter = 1;
        let usedCreativeNames = new Set();
        
        // Show/hide creator name field based on creator type
        function updateCreatorTypeFields() {
            const creatorType = document.getElementById('creatorType').value;
            const creatorNameDiv = document.getElementById('creatorNameDiv');
            
            if (creatorType && creatorType !== 'internal') {
                creatorNameDiv.style.display = 'block';
            } else {
                creatorNameDiv.style.display = 'none';
                document.getElementById('creatorName').value = '';
            }
            updatePreview();
        }
        
        // Toggle creative tags section
        function toggleCreativeTags() {
            const useFullTags = document.getElementById('useFullTags').checked;
            const creativeTagsSection = document.getElementById('creativeTagsSection');
            
            if (useFullTags) {
                creativeTagsSection.style.display = 'block';
            } else {
                creativeTagsSection.style.display = 'none';
            }
            updatePreview();
        }
        
        // Enhanced function to format text to PascalCase (handle spaces and camelCase detection)
        function formatToPascalCase(text) {
            if (!text) return '';
            
            // Remove forbidden filename characters: ! " # $ % & ' ( ) * + , / : ; < = > ? [ \ ] ^ ` { | } ~
            const forbiddenChars = /[!"#$%&'()*+,/:;<=>?[\\\]^`{|}~]/g;
            const cleanedText = text.replace(forbiddenChars, '');
            
            // First, split by spaces and clean up
            let words = cleanedText.trim().split(/\s+/);
            
            // If there's only one word, check for camelCase transitions
            if (words.length === 1 && words[0].length > 1) {
                // Split camelCase words (e.g., "dirtyKitchen" â†’ ["dirty", "Kitchen"])
                words = words[0].split(/(?=[A-Z])/).filter(word => word.length > 0);
            }
            
            // Format each word: capitalize first letter, lowercase the rest
            return words.map(word => {
                if (word.length === 0) return '';
                return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
            }).join('');
        }

        // Function to format creative name in real-time with magical auto-increment
        function formatCreativeName() {
            const input = document.getElementById('filename');
            const numberInput = document.getElementById('creativeNumber');
            const cursorPos = input.selectionStart;
            const originalValue = input.value;
            
            // Remove any existing number suffix for formatting
            const valueWithoutNumber = originalValue.replace(/-\d+$/, '');
            const formatted = formatToPascalCase(valueWithoutNumber);
            
            // Add magical auto-increment number if name is not empty
            let finalValue = formatted;
            if (formatted && formatted.length > 0) {
                // Check if this base name already exists
                const baseName = formatted;
                
                // Find the next available number (the magic!)
                // Start with 1, then 2, 3...
                let numberToUse = 1;
                while (usedCreativeNames.has(`${baseName}-${numberToUse}`)) {
                    numberToUse++;
                }
                
                // Always add dash and number starting from 1
                finalValue = `${baseName}-${numberToUse}`;
                
                // Update the number display to show what was auto-selected
                numberInput.value = numberToUse;
                
                // Update the set of used names
                if (originalValue !== finalValue) {
                    usedCreativeNames.add(finalValue);
                }
            }
            
            // Only update if the value actually changed to avoid cursor jumping
            if (originalValue !== finalValue) {
                input.value = finalValue;
                
                // Try to maintain cursor position (before the number part)
                const newPos = Math.min(cursorPos, formatted.length);
                setTimeout(() => {
                    input.setSelectionRange(newPos, newPos);
                }, 0);
            }
            
            updatePreview();
        }

        // Function to handle manual number changes (user override)
        function manualNumberChange() {
            const input = document.getElementById('filename');
            const numberInput = document.getElementById('creativeNumber');
            const currentName = input.value;
            
            // If there's a name, update it with the new number
            if (currentName) {
                const nameWithoutNumber = currentName.replace(/-\d+$/, '');
                const newNumber = parseInt(numberInput.value) || 1;
                
                // Always add dash and number starting from 1
                const newName = `${nameWithoutNumber}-${newNumber}`;
                
                // Update the used names set
                usedCreativeNames.add(newName);
                input.value = newName;
                updatePreview();
            }
        }

        // Function to format any input field to CamelCase
        function formatInputToCamelCase(inputId) {
            const input = document.getElementById(inputId);
            if (!input) return;
            
            const cursorPos = input.selectionStart;
            const originalValue = input.value;
            const formatted = formatToPascalCase(originalValue);
            
            if (originalValue !== formatted) {
                input.value = formatted;
                
                const newPos = Math.min(cursorPos, formatted.length);
                setTimeout(() => {
                    input.setSelectionRange(newPos, newPos);
                }, 0);
            }
            
            updatePreview();
        }

        // Function to handle hook text input visibility
        function updateHookText() {
            const hookSelect = document.getElementById('hook');
            const hookTextInput = document.getElementById('hookTextInput');
            const hookUgcInput = document.getElementById('hookUgcInput');
            
            // Hide both inputs first
            hookTextInput.style.display = 'none';
            hookUgcInput.style.display = 'none';
            hookTextInput.value = '';
            hookUgcInput.value = '';
            
            if (hookSelect.value === 'text') {
                hookTextInput.style.display = 'block';
            } else if (hookSelect.value === 'UGC') {
                hookUgcInput.style.display = 'block';
            }
        }

        // Function to handle voice dropdown changes
        function updateVoiceText() {
            const voiceSelect = document.getElementById('voiceOver');
            const voiceNameInput = document.getElementById('voiceName');
            
            if (voiceSelect.value === 'custom') {
                voiceNameInput.style.display = 'block';
            } else {
                voiceNameInput.style.display = 'none';
                voiceNameInput.value = '';
            }
        }

        // Function to handle music custom input visibility
        function updateMusicText() {
            const musicSelect = document.getElementById('music');
            const musicCustomInput = document.getElementById('musicCustom');
            
            if (musicSelect.value === 'custom') {
                musicCustomInput.style.display = 'block';
            } else {
                musicCustomInput.style.display = 'none';
                musicCustomInput.value = '';
            }
        }

        function updatePreview() {
            const creatorType = document.getElementById('creatorType').value || '[creator-type]';
            const creatorName = document.getElementById('creatorName').value;
            const filename = document.getElementById('filename').value || '[filename]';
            const useFullTags = document.getElementById('useFullTags').checked;
            const language = document.getElementById('language').value || '[language]';
            const feature = document.getElementById('feature').value;
            
            // Build creator type part
            let creatorTypePart = '';
            if (creatorType !== '[creator-type]') {
                if (creatorType === 'internal') {
                    creatorTypePart = `${creatorType}-${filename}`;
                } else if (creatorName) {
                    creatorTypePart = `${creatorType}-${creatorName}-${filename}`;
                } else {
                    creatorTypePart = `${creatorType}-[name]-${filename}`;
                }
            } else {
                creatorTypePart = `[creator-type]-${filename}`;
            }
            
            let preview = creatorTypePart;
            
            // Add creative tags or placeholder
            if (useFullTags) {
                const hook = document.getElementById('hook').value || '[hook]';
                const hookTextInput = document.getElementById('hookTextInput').value;
                const voiceName = document.getElementById('voiceName').value || '[voice]';
                const voScript = document.getElementById('voScript').value;
                const music = document.getElementById('music').value || '[music]';
                const musicCustom = document.getElementById('musicCustom').value;
                const dimension = document.getElementById('dimension').value || '[dim]';
                
                // Build HOOK
                const hookUgcInput = document.getElementById('hookUgcInput').value;
                let hookPart = `HOOK-${hook}`;
                if (hook === 'text' && hookTextInput) {
                    const formattedText = formatToPascalCase(hookTextInput);
                    hookPart = `HOOK-text-${formattedText}`;
                } else if (hook === 'UGC' && hookUgcInput) {
                    hookPart = `HOOK-ugc-${hookUgcInput}`;
                }
                
                // Build VO
                const voiceOver = document.getElementById('voiceOver').value;
                let voiceToUse = voiceOver === 'custom' ? voiceName : voiceOver;
                let voPart = `VO-${voiceToUse || '[voice]'}`;
                if (voScript) {
                    const formattedScript = formatToPascalCase(voScript);
                    voPart += `-${formattedScript}`;
                }
                
                // Build MUSIC
                let musicPart = 'MUSIC-';
                if (music === 'custom' && musicCustom) {
                    const formattedMusicName = formatToPascalCase(musicCustom);
                    musicPart += formattedMusicName;
                } else {
                    musicPart += music;
                }
                
                // Build tags block
                const tagsBlock = `${hookPart}_${voPart}_${musicPart}_${dimension}`;
                preview += `_${tagsBlock}`;
            } else {
                preview += `_-`;
            }
            
            // Add feature tag if selected
            if (feature) {
                preview += `_${feature}`;
            }
            
            // Add language
            preview += `_${language}`;
            
            // Update live display
            document.getElementById('liveNameText').textContent = preview;
            
            // Update mock preview with sample ID/creator/date
            const randomId = Math.floor(Math.random() * 90000) + 10000;
            const currentDate = new Date().toLocaleDateString('en-GB').replace(/\//g, '');
            const mockPreview = `${randomId}_Jiali_${preview}_${currentDate}`;
            document.getElementById('mockPreview').textContent = mockPreview;
        }
        
        // Update creator type change handler
        document.getElementById('creatorType').addEventListener('change', updateCreatorTypeFields);
        
        // Feature tag selection function
        function selectFeatureTag(button) {
            // Remove active class from all buttons
            document.querySelectorAll('.feature-tag-btn').forEach(btn => {
                btn.classList.remove('active', 'btn-outline-primary');
                btn.classList.add('btn-outline-secondary');
            });
            
            // Add active class to clicked button
            button.classList.remove('btn-outline-secondary');
            button.classList.add('active', 'btn-outline-primary');
            
            // Update hidden input value
            document.getElementById('feature').value = button.dataset.value;
            
            // Update preview
            updatePreview();
        }
        
        function copyLiveName() {
            const nameText = document.getElementById('liveNameText').textContent;
            navigator.clipboard.writeText(nameText).then(function() {
                const copyBtn = document.getElementById('liveCopyBtn');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                copyBtn.classList.add('copied');
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('copied');
                }, 2000);
            }).catch(function(err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy to clipboard. Please copy manually: ' + nameText);
            });
        }

        // Function to generate iteration name
        function generateIteration() {
            const originalFilename = document.getElementById('originalFilename').value.trim();
            const iterationNumber = document.getElementById('iterationNumber').value || 1;
            const resultElement = document.getElementById('iterationResult');
            
            if (!originalFilename) {
                resultElement.textContent = '12345_Jiali_internal-RedBottle-ITE-1_ANIM_EN';
                return;
            }
            
            // Parse the AdManage filename format: [id]_[creator]_[creator-type-filename]_[HOOK-â€¦_VO-â€¦_MUSIC-â€¦_DIM]_[feature]_[language]_[date]
            const parts = originalFilename.split('_');
            
            if (parts.length < 3) {
                resultElement.textContent = 'Invalid filename format';
                return;
            }
            
            // Find the product name part (usually the 3rd part, starts with creator type)
            let productNameIndex = 2; // Default to 3rd part (index 2)
            let productNamePart = parts[productNameIndex];
            
            // Check if the product name already has an iteration
            const iterationRegex = /-ITE-\d+/;
            if (iterationRegex.test(productNamePart)) {
                // Remove existing iteration
                productNamePart = productNamePart.replace(iterationRegex, '');
            }
            
            // Add the new iteration
            const newProductName = `${productNamePart}-ITE-${iterationNumber}`;
            
            // Reconstruct the filename
            const newParts = [...parts];
            newParts[productNameIndex] = newProductName;
            const iterationFilename = newParts.join('_');
            
            resultElement.textContent = iterationFilename;
        }

        // Function to copy iteration name
        function copyIterationName() {
            const nameText = document.getElementById('iterationResult').textContent;
            
            if (nameText === 'Invalid filename format') {
                alert('Please enter a valid filename first');
                return;
            }
            
            navigator.clipboard.writeText(nameText).then(function() {
                const copyBtn = document.getElementById('iterationCopyBtn');
                const originalText = copyBtn.innerHTML;
                copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                copyBtn.classList.add('copied');
                
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.classList.remove('copied');
                }, 2000);
            }).catch(function(err) {
                console.error('Could not copy text: ', err);
                alert('Could not copy to clipboard. Please copy manually: ' + nameText);
            });
        }
        
        function clearForm() {
            document.getElementById('nameGeneratorForm').reset();
            document.getElementById('creatorNameDiv').style.display = 'none';
            document.getElementById('creativeTagsSection').style.display = 'none';
            document.getElementById('usePlaceholder').checked = true;
            
            // Hide conditional inputs
            document.getElementById('hookTextInput').style.display = 'none';
            document.getElementById('hookUgcInput').style.display = 'none';
            document.getElementById('voiceName').style.display = 'none';
            document.getElementById('musicCustom').style.display = 'none';
            
            // Set default values
            document.getElementById('creatorType').value = 'internal';
            document.getElementById('hook').value = 'come';
            document.getElementById('voiceOver').value = 'tom';
            document.getElementById('music').value = 'any';
            document.getElementById('dimension').value = 'PT';
            document.getElementById('feature').value = 'AIBG';
            document.getElementById('language').value = 'EN';
            document.getElementById('creativeNumber').value = '1';
            
            // Reset feature tag buttons
            document.querySelectorAll('.feature-tag-btn').forEach(btn => {
                btn.classList.remove('active', 'btn-outline-primary');
                btn.classList.add('btn-outline-secondary');
            });
            // Set AIBG as active
            const aibgBtn = document.querySelector('[data-value="AIBG"]');
            if (aibgBtn) {
                aibgBtn.classList.remove('btn-outline-secondary');
                aibgBtn.classList.add('active', 'btn-outline-primary');
            }
            
            updatePreview();
            
            // Remove validation classes
            document.querySelectorAll('.is-invalid').forEach(el => {
                el.classList.remove('is-invalid');
            });
        }
        
        // Initialize preview on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Set default values on page load
            document.getElementById('creatorType').value = 'internal';
            document.getElementById('hook').value = 'come';
            document.getElementById('voiceOver').value = 'tom';
            document.getElementById('music').value = 'any';
            document.getElementById('dimension').value = 'PT';
            document.getElementById('feature').value = 'AIBG';
            document.getElementById('language').value = 'EN';
            document.getElementById('creativeNumber').value = '1';
            document.getElementById('usePlaceholder').checked = true;
            
            toggleCreativeTags();
            updatePreview();
        });
    </script>
{% endblock %}
